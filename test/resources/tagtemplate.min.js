function Templates(){this.elementErrors=[];this.elementPath="elements/";this.elementTag="t";this.extension="html";this.elementLoaded=[];var d=this;this.init=function(){var a=$(d.elementTag);a.each(function(){var a=$(this);n(a)});0<a.length?d.init():0<d.elementErrors.length&&$.each(d.elementErrors,function(a,c){console.error(c)})};var e=function(a,b){return a.is("["+b+"]")?a.attr(b):""},h=function(a,b){var c=e(a,"name"),g=e(a,"filename"),f=e(a,"instance"),f=""!=f?"-"+f:"";if("css"==b||"js"==b)g=f=
"";g=""!=g?g:c+f+"."+(b||d.extension);return d.elementPath+c+"/"+g},n=function(a){$.ajax({url:h(a),async:!1,dataType:"html",success:function(b){var c=e(a,"name");-1==d.elementLoaded.indexOf(c)&&($("<link/>",{rel:"stylesheet",type:"text/css",href:h(a,"css")}).appendTo("head"),a.is("[script]")&&(c=a.attr("script"),c=""!=c?c:h(a,"js"),$.getScript(c)),c=e(a,"name"),d.elementLoaded.push(c));a.is("[image]")&&(c=a.attr("image").split("|"),b=b.replace('width="#"','width="'+c[0]+'"'),b=b.replace('height="#"',
'height="'+c[1]+'"'));a.is("[size]")&&(b=p(a,b));a.replaceWith(b)},error:function(b,c,g){d.elementErrors.push("Error al cargar el elemento "+e(a,"name")+e(a,"instance")+"."+d.extension);a.remove()}})},p=function(a,b){var c=a.attr("size"),d="",f="",h=[],l=[],c=""!=c?parseInt(c,10):0;if(a.is("[odd]")||a.is("[even]"))d=e(a,"odd"),f=e(a,"even");a.find("include").each(function(){var a=$(this),b=[],c=e(a,"onposition");b.push(a.html());a.is("[after]")&&b.push(!0);l[parseInt(c,10)-1]=b});for(i=0;i<c;i++){b=
$(b);b.removeClass(d+" "+f).addClass(0==i%2?d:f);var k="",m=!1;void 0!=l[i]&&(m=void 0!=l[i][1]?!0:!1,k=l[i][0]);k=m?$("<div>").append($(b).clone()).html()+k:k+$("<div>").append($(b).clone()).html();h[i]=k}return b=h.join("")}};